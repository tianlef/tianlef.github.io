# Spring课程笔记

## 目标

- IOC
- AOP
  - 事务处理

## How

- 框架设计思想
- 学习基础操作
- 学习案例
  
# 发展

- Spring 全家桶
  - Spring FrameWork
    - 来源于EJB
    - 1.0 纯配置
    - 2.0 引入注解
    - 3.0 完全注解 
    - 底层原理来源于配置
    - Spring 5 全面支持 JDK 8
  - Spring Boot
  - Spring Cloud

## Spring FrameWork

- 是其他项目的根基
- 架构图
  - Core Container
  - AOP
    - 面向切面编程
  - Aspects
    - AOP思想实现
  - Data Access/Data Integration
  - Transactions
    - 事务
  - Web
    - web开发
  - Test
    - 单元测试与集成
  
## 核心容器

- IOC
  - 程序不主动new对象，由外部提供对象
  - 控制反转
  - 减少程序耦合
- Spring提供了IOC容器，用来提供对象
  - 管理对象的创建和初始化过程
  - 被创建或被管理的对象在IOC容器中称为Bean
- DI
  - 依赖注入
  - 在IOC容器中建立Bean与bean之间的依赖关系的整个过程

- 使用对象可以直接从IOC中获取，并且获取到的bean绑定了所有的依赖关系

## bean

- bean基础配置
  - Spring默认给我们创建的bean是单例的
    - scope 
      - prototype
      - singleton
  - Spring帮我们管理可以复用的对象
  - 适合交给容器管理的bean
    - 表现层对象
    - 业务层对象
    - 数据层对象
    - 工具对象
- bean实例化
  - 构造方法
  - 静态工厂
  - 实例工厂
  - FactoryBean
  
- Spring报错
  - 从下往上看
  
- bean的生命周期控制
  - 在声明周期前后可以定义初始之前、销毁之后的函数
  - 方式一
    - init-method
    - destory-method
  - 方式二
    - InitializingBean
    - Disposalebean
  - 生命周期
    - 创建对象 分配内存
    - 执行构造方法
    - 执行set方法
    - 执行bean初始化方法
    - 执行业务操作
    - 执行bean销毁方法
  - 触发bean的销毁
    - ConfigurableApplicationContext 
      - close()
      - registerShutdownHook()

- 依赖注入
  - 方式
    - setter注入
      - property
      - 简单类型
        - value 
      - **引用类型**
        - ref bean
    - 构造器注入
      - Constructor-arg 
      - - type
      - index
      - name 
      - 简单类型
        - value
      - 引用类型
        - ref
        
  - 依赖自动装配
    - 用于引用类型的自动装配
    - 不能用于简单类型
    - 优先级低于setter注入和构造器注入
    - 容器根据bean需要的资源自动帮忙配置属性
    - autowrie
      - byType
        - 按类型装配不用起名
        - 推荐使用
      - byName
  
  - 集合注入
    - 数组
      - array
        - value>
        - value>
    - List
      - list>
        - value>
    - Set
      - set>
        - value>
    - Map
      - map>
        - entry key = '' value = ''>
    - Property
      - props>
        - prop key = ''></pop>

- 案例：数据源对象管理
  - 数据库连接池
  - 配置
  - druid
  - c3p0

- 加载properties文件
  - 开启context命名空间
  - 使用context空间加载properties文件
  - context ： property-placeholder location='jdbc.properties'
  - 使用属性占位符 读取${}$属性
  
  



